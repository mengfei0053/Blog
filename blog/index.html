<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/Blog/blog/rss.xml" title="Meng Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Blog/blog/atom.xml" title="Meng Blog Atom Feed"><title data-react-helmet="true">Blog | Meng</title><meta data-react-helmet="true" property="og:title" content="Blog | Meng"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="description" content="Blog"><meta data-react-helmet="true" property="og:description" content="Blog"><meta data-react-helmet="true" property="og:url" content="https://mengfei0053.github.io//Blog/blog"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_posts_list"><link data-react-helmet="true" rel="shortcut icon" href="/Blog/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://mengfei0053.github.io//Blog/blog"><link data-react-helmet="true" rel="alternate" href="https://mengfei0053.github.io//Blog/blog" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://mengfei0053.github.io//Blog/blog" hreflang="x-default"><link rel="stylesheet" href="/Blog/assets/css/styles.2a5b91fc.css">
<link rel="preload" href="/Blog/assets/js/runtime~main.1e96c18e.js" as="script">
<link rel="preload" href="/Blog/assets/js/main.03c5c8ee.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Blog/"><img src="/Blog/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/Blog/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">孟飞</b></a><a class="navbar__item navbar__link" href="/Blog/markdown-page">常用设置</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Blog/blog">文章</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">All posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/Blog/blog/Linux/Linux-install-nodejs">Linux下nodejs安装源nodesource</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/Blog/blog/Nodejs/NPM包开发KnowledgeMap">NPM包开发KnowledgeMap</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/Blog/blog/Nodejs/npm-shrinkwrap.json变化记录">从npm-shrinkwrap 到 package-lock</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/Blog/blog/Nodejs/npm包锁版本">npm-shrinkwrap.json、package-lock.json和yarn.loc</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/Blog/blog/Nodejs/process信号事件">Nodejs Process 信号事件</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/Blog/blog/Others/Front-End-Test">前端自动化测试</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/Blog/blog/React/ReactHooks">ReactHooks</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/Blog/blog/Ts/Typescript使用总结及部分小技巧">Typescript使用总结及部分小技巧</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/Blog/blog/Powershell-windows">Powershell 下无法使用 npm 全局包</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/Blog/blog/Linux/Linux-install-nodejs">Linux下nodejs安装源nodesource</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-09-18T10:28:25.189Z" itemprop="datePublished">September 18, 2021</time> · One min read</div></header><div class="markdown" itemprop="articleBody"><p><a href="https://github.com/nodesource/distributions" target="_blank" rel="noopener noreferrer">https://github.com/nodesource/distributions</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="常用"></a>常用<a class="hash-link" href="#常用" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="debian-and-ubuntu-based-distributions"></a>Debian and Ubuntu based distributions<a class="hash-link" href="#debian-and-ubuntu-based-distributions" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Using Ubuntu</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -fsSL https://deb.nodesource.com/setup_14.x </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> -E </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> -</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y nodejs</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Using Debian, as root</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -fsSL https://deb.nodesource.com/setup_14.x </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> -</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y nodejs</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="enterprise-linux-based-distributions"></a>Enterprise Linux based distributions<a class="hash-link" href="#enterprise-linux-based-distributions" title="Direct link to heading">#</a></h3><p>Run on RHEL, CentOS, CloudLinux, Amazon Linux or Fedora:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># As root</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -fsSL https://rpm.nodesource.com/setup_14.x </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> -</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># No root privileges</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -fsSL https://rpm.nodesource.com/setup_14.x </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> -</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/Blog/blog/Nodejs/NPM包开发KnowledgeMap">NPM包开发KnowledgeMap</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-09-18T10:28:25.189Z" itemprop="datePublished">September 18, 2021</time> · 3 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mengfei0053" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">MengFei</span></a></div><small class="avatar__subtitle" itemprop="description">Front-End Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>给公司的文档库写了篇私库开发的 KnowledgeMap，从中摘取一部分。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="思考"></a>思考：<a class="hash-link" href="#思考" title="Direct link to heading">#</a></h2><ol><li>当我们 npm i package 的时候之后，require 或 import 一个包的时时候，是如何寻找到这个包的。</li><li>当一个包，在项目中存在多个版本的情况，如何确定引入的是哪个版本。例如项目依赖了 <a href="mailto:packageA@3.0.0" target="_blank" rel="noopener noreferrer">packageA@3.0.0</a> 和 <a href="mailto:packageB@1.0.0" target="_blank" rel="noopener noreferrer">packageB@1.0.0</a>， 而packageB 又依赖了<a href="mailto:pacakgeA@2.0.0" target="_blank" rel="noopener noreferrer">pacakgeA@2.0.0</a>.</li><li>npm 包是如何提供一个命令的。例如， 当我们安装 npm -g nrm 的时候，为何会有nrm 命令产生。</li><li>如何手动发布一个npm 包到公网npm 仓库</li><li>包的版本如何定义</li><li>什么时候需要发布一个npm 包</li><li>什么时间节点需要发布一个 npm 包的新版本，新的版本又该如何定义。</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="正文"></a>正文<a class="hash-link" href="#正文" title="Direct link to heading">#</a></h2><p>由于上述问题，涉及到的内容略多，下是推荐和相关的知识点。</p><ol><li>nodejs的模块解析策略 <ol><li><a href="http://nodejs.cn/api/modules.html" target="_blank" rel="noopener noreferrer">http://nodejs.cn/api/modules.html</a></li><li><a href="https://www.tslang.cn/docs/handbook/module-resolution.html" target="_blank" rel="noopener noreferrer">https://www.tslang.cn/docs/handbook/module-resolution.html</a></li></ol></li><li>package.json 字段含义<ol><li><a href="https://docs.npmjs.com/cli/v6/configuring-npm/package-json" target="_blank" rel="noopener noreferrer">https://docs.npmjs.com/cli/v6/configuring-npm/package-json</a></li><li>非官方扩展字段 不在基础node或浏览器环境下支持，但被某些包支持<ul><li>module  指定esm module 的入口文件。 由rollup最早提出(<a href="https://github.com/rollup/rollup/wiki/pkg.module" target="_blank" rel="noopener noreferrer">https://github.com/rollup/rollup/wiki/pkg.module</a>), webpack2.x之后版本开始支持</li><li>types, typings  指定包的d.ts的入口文件，由typescript 支持</li><li>unpkg  公网npm 包可以使用的的cdn  <a href="https://github.com/mjackson/unpkg" target="_blank" rel="noopener noreferrer">https://github.com/mjackson/unpkg</a></li><li>sideEffects Webpack 支持的，用来标记副作用文件，是否可以被TreeShaking</li></ul></li></ol></li><li>esm module 和 cjs module 是什么， 有什么区别<ol><li>esm <a href="https://tc39.es/ecma262/#sec-modules" target="_blank" rel="noopener noreferrer">https://tc39.es/ecma262/#sec-modules</a></li><li>cjs <a href="http://nodejs.cn/api/modules.html" target="_blank" rel="noopener noreferrer">http://nodejs.cn/api/modules.html</a></li></ol></li><li>命令的本质就是一个可执行文件，俗称脚本文件。nodejs 产生的js 脚本文件 在使用 #！ /user/bin/env node 指定脚本的运行者。如同shell 脚本需要在文件头指定运行者 #! /bin/bash 一样。<ol><li>npm 发布相关命令   <a href="https://docs.npmjs.com/cli/v7/commands" target="_blank" rel="noopener noreferrer">https://docs.npmjs.com/cli/v7/commands</a><ul><li>npm login </li><li>npm public</li><li>npm deprecate</li></ul></li></ol></li><li>npm 的语义化版本<ol><li><a href="https://docs.npmjs.com/about-semantic-versioning" target="_blank" rel="noopener noreferrer">https://docs.npmjs.com/about-semantic-versioning</a></li><li><a href="https://semver.org" target="_blank" rel="noopener noreferrer">https://semver.org</a></li></ol></li><li>了解包 semantic-release  系列的包 <a href="https://github.com/semantic-release/semantic-release" target="_blank" rel="noopener noreferrer">https://github.com/semantic-release/semantic-release</a></li><li>了解 conventional-changelog 系列的包 <ol><li><a href="https://www.conventionalcommits.org/" target="_blank" rel="noopener noreferrer">https://www.conventionalcommits.org/</a></li><li><a href="https://github.com/conventional-changelog" target="_blank" rel="noopener noreferrer">https://github.com/conventional-changelog</a></li></ol></li></ol></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Blog/blog/tags/npm">npm</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/Blog/blog/Nodejs/npm-shrinkwrap.json变化记录">从npm-shrinkwrap 到 package-lock</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-09-18T10:28:25.189Z" itemprop="datePublished">September 18, 2021</time> · 16 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mengfei0053" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">MengFei</span></a></div><small class="avatar__subtitle" itemprop="description">Front-End Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="关于-shrinkwrap-的更新"></a>关于 shrinkwrap 的更新<a class="hash-link" href="#关于-shrinkwrap-的更新" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="v1316v2152"></a><a href="https://github.com/npm/cli/blob/v2.15.12/CHANGELOG.md" target="_blank" rel="noopener noreferrer">v1.3.16~v2.15.2</a><a class="hash-link" href="#v1316v2152" title="Direct link to heading">#</a></h3><ul><li>v1.3.16 (2013-12-11):<ul><li>Stopped re-downloading URL and shrinkwrap dependencies, as demonstrated in #3463 (644c2ff, @spmason). You can use the --force option to force re-download and installation of all dependencies.</li></ul></li><li>v1.4.1 (2014-02-13):<ul><li>Fix npm shrinkwrap forgetting to shrinkwrap dependencies that were also development dependencies</li></ul></li><li>v1.4.3 (2014-02-16):<ul><li>Make npm shrinkwrap output dependencies in a sorted order, so that diffs between shrinkwrap files should be saner now. (059b2bf, @Raynos)</li></ul></li><li>v1.4.7 (2014-04-15):<ul><li>Fix npm crashing when doing npm shrinkwrap in the presence of a package.json with no dependencies. (a9d9fa5, @kislyuk)</li></ul></li><li>v2.1.8 (2014-11-06):<ul><li>063d843 npm version now updates version in npm-shrinkwrap.json (@faiq)</li><li>3f53cd7 #6559 save local dependencies in npm-shrinkwrap.json (@Torsph)</li></ul></li><li>v2.1.13 (2014-12-11):<ul><li>cb6ff8d #6879 npm version: Update shrinkwrap post-check. (@othiym23)</li></ul></li><li>v2.1.17 (2014-12-25):<ul><li>6b7c5ec #7011 Send auth for tarball fetches for packages in npm-shrinkwrap.json from private registries. (@othiym23)</li></ul></li><li>v2.7.1 (2015-03-05):<ul><li>6823807 #7121 npm install --save for Git dependencies saves the URL passed in, instead of the temporary directory used to clone the remote repo. Fixes using Git dependencies when shrinkwrapping. In the process, rewrote the Git dependency caching code. Again. No more single-letter variable names, and a much clearer workflow. (@othiym23)</li></ul></li><li>v2.7.3 (2015-03-16):<ul><li>1549106 #7641 Due to 448efd0, running npm shrinkwrap --dev caused production dependencies to no longer be included in npm-shrinkwrap.json. Whoopsie! (@othiym23)</li></ul></li><li>v2.8.3 (2015-04-15):<ul><li>387f889 #7961 Ensure that hosted git SSH URLs always have a valid protocol when stored in resolved fields in npm-shrinkwrap.json. (@othiym23)</li></ul></li><li>v2.9.1 (2015-04-30):<ul><li>b574076 #8079 Make the npm shrinkwrap documentation use code formatting for examples consistently. It would be great to do this for more commands HINT HINT. (@RichardLitt)</li></ul></li><li>v2.11.0 (2015-05-21):<ul><li>f87cde5 #8292 Fix typo in an example and grammar in the description in the shrinkwrap documentation. (@vshih)</li><li>d3526ce Improve the formatting in the shrinkwrap documentation. (@othiym23)</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="v300v31010"></a><a href="https://github.com/npm/cli/blob/v3.10.10/CHANGELOG.md" target="_blank" rel="noopener noreferrer">v3.0.0~v3.10.10</a><a class="hash-link" href="#v300v31010" title="Direct link to heading">#</a></h3><ul><li>v3.0.0 (2015-06-25):<ul><li>Install: it works different!<ul><li>#6928 (#2931 #2950) npm install when you have an npm-shrinkwrap.json will ensure you have the modules specified in it are installed in exactly the shape specified no matter what you had when you started.</li><li>#6913 (#1341 #3124 #4956 #6349 #5465) npm install when some of your dependencies are missing sub-dependencies will result in those sub-dependencies being installed. That is, npm install now knows how to fix broken installs, most of the time.</li><li>#5465 If you directly npm install a module that&#x27;s already a subdep of something else and your new version is incompatible, it will now install the previous version nested in the things that need it.</li><li>a2b50cf #5693 When installing a new module, if it&#x27;s mentioned in your npm-shrinkwrap.json or your package.json use the version specifier from there if you didn&#x27;t specify one yourself.</li></ul></li><li>Shrinkwraps: they are a-changin&#x27;!<ul><li>First of all, they should be idempotent now (#5779). No more differences because the first time you install (without npm-shrinkwrap.json) and the second time (with npm-shrinkwrap.json).</li><li>#6781 Second, if you save your changes to package.json and you have npm-shrinkwrap.json, then it will be updated as well. This applies to all of the commands that update your tree:<ul><li>npm install --save</li><li>npm update --save</li><li>npm dedupe --save (#6410)</li><li>npm uninstall --save</li></ul></li><li>#4944 (#5161 #5448) Third, because node_modules folders are now deduped and flat, shrinkwrap has to also be smart enough to handle this.</li><li>And finally, enjoy this shrinkwrap bug fix:<ul><li>#3675 When shrinkwrapping a dependency that&#x27;s both a devDependency and the child of a regular dependency, npm now correctly includes the child.</li></ul></li></ul></li></ul></li><li>v3.1.0 (2015-07-02):</li><li>57c3cea #8695 Remote packages with shrinkwraps made npm cause node + iojs to explode and catch fire. NO MORE. (@iarna)</li><li>v3.3.0 (2015-08-13):<ul><li>As shrinkwraps don&#x27;t include dev deps by default. This replaces passing in --dev in that scenario.</li></ul></li><li>v3.3.7 (2015-10-08):<ul><li>87336c3 #9879 npm@3&#x27;s shrinkwrap was refusing to shrinkwrap if an optional dependency was missing– patch it to allow this. (@mantoni)</li></ul></li><li>v3.3.10 (2015-10-22):<ul><li>SHRINKWRAP + DEV DEPS NOW RESPECTED</li><li>eb28a8c #9647 If a shrinkwrap already has dev deps, don&#x27;t throw them away when someone later runs npm install --save. (@iarna)</li></ul></li><li>v3.3.11 (2015-10-29):<ul><li>PARTIAL SHRINKWRAPS, NO LONGER A BAD DAY</li><li>We&#x27;re ignoring the version check on things specified in the shrinkwrap so that you can override the version that will be installed. This is because you may want to use a different version than is specified by your dependencies&#x27; dependencies&#x27; package.json files.</li></ul></li><li>v3.7.3 (2016-02-11):<ul><li>42a4727 #11391 Fixed versions of shrinkwrap.json in examples in documentation for npm shrinkwrap, which did not quite match up. (@xcatliu)</li></ul></li><li>v3.8.9 (2016-04-28)：<ul><li>60da618 #12347 Fix a bug that could result in shrinkwraps missing the resolved field, which is necessary in producing a fully reproducible build. (@sminnee)</li></ul></li><li>v3.9.1 (2016-05-12)：<ul><li>b894413 #12372 Changing a nested dependency in an npm-shrinkwrap.json and then running npm install would not get up the updated package. This corrects that. (@misterbyrne)</li></ul></li><li>v3.9.2 (2016-05-17):<ul><li>This is a quick patch release. The previous release, 3.9.1, introduced a bug where npm would crash given a combination of specific package tree on disk and a shrinkwrap.</li><li>cde367f #12724 Fix crasher when inflating shrinkwraps with packages on disk that were installed by older npm versions. (@iarna)</li></ul></li><li>v3.10.0 (2016-06-16):<ul><li>NEW LIFECYCLE SCRIPT: shrinkwrap</li><li>e8c80f2 #10744 You can now add preshrinkwrap, shrinkwrap and postshrinkwrap to your package.json scripts section. They are run when you run npm shrinkwrap or npm install --save with an npm-shrinkwrap.json present in your module directory.</li><li>preshrinkwrap and shrinkwrap is run prior to generating the new npm-shrinkwrap.json and postshrinkwrap is run after. (@SimenB)</li></ul></li><li>v3.10.4 (2016-06-30):<ul><li>SHRINKWRAP IS COMPLICATED BUT IT&#x27;S BETTER NOW</li><li>@iarna did some heroic hacking to refactor a bunch of shrinkwrap-related bits and fixed some resolution and pathing issues that were biting users. The code around that stuff got more readable/maintainable in the process, too!</li><li>346bba1 #13214 Resolve local dependencies in npm-shrinkwrap.json relative to the top of the tree. (@iarna)</li><li>4a67fdb #13213 If you run npm install modulename it should, if a npm-shrinkwrap.json is present, use the version found there. If not, it&#x27;ll use the version found in your package.json, and failing that, use latest. This fixes a case where the first check was being bypassed because version resolution was being done prior to loading the shrinkwrap, and so checks to match the shrinkwrap version couldn&#x27;t succeed. (@iarna)</li><li>afa2133 #13214 Refactor shrinkwrap specifier lookup into shared function. (@iarna)</li><li>2820b56 #13214 Refactor operations in inflate-shrinkwrap.js into separate functions for added clarity. (@iarna)</li><li>ee5bfb3 Fix Windows path issue in a shrinkwrap test. (@zkat)</li></ul></li><li>v3.10.6 (2016-07-07):<ul><li>This week we have a bunch of bug fixes for ya! A shrinkwrap regression introduced in 3.10.0, better lifecycle PATH behavior, improvements when working with registries other than registry.npmjs.org and a fix for hopefully the last don&#x27;t print a progress bar over my interactive thingy bug.</li><li>SHRINKWRAP AND DEV DEPENDENCIES</li><li>The rewrite in 3.10.0 triggered a bug where dependencies of devDependencies would be included in your shrinkwrap even if you didn&#x27;t request devDependencies.</li><li>2484529 #13308 Fix bug where deps of devDependencies would be incorrectly included in shrinkwraps. (@iarna)</li></ul></li><li>v3.10.7 (2016-08-11):<ul><li>BETTER SHRINKWRAP WITH GIT DEPENDENCIES<ul><li>0f7e319 #12718 Update outdated git dependencies found in shrinkwraps. Previously, if the module version was the same then no update would be completed even if the committish had changed. (@kossnocorp)</li></ul></li></ul></li><li>v3.10.8 (2016-09-08):<ul><li>SHRINKWRAP LEVEL UP</li><li>The most notable part of this release is a series of commits meant to make npm shrinkwrap more consistent. By itself, shrinkwrap seems like a fairly straightforward thing to implement, but things get complicated when it starts interacting with devDependencies, optionalDependencies, and bundledDependencies. These commits address some corner cases related to these.<ul><li>a7eca32 #10073 Record if a dependency is only used as a devDependency and exclude it from the shrinkwrap file. (@bengl)</li><li>1eabcd1 #10073 Record if a dependency is optional to shrinkwrap. (@bengl)</li><li>03efc89 #13692 We were doing a weird thing where we used a package.json field installable to check to see if we&#x27;d checked for platform compatibility, and if not did so. But this was the only place that was ever done so there was no reason to implement it in such an obfuscated manner. Instead it now just directly checks and then records that its done so on the node object with knownInstallable. This is useful to know because modules expanded via shrinkwrap don&#x27;t go through this– inflateShrinkwrap does not currently have any rollback semantics and so checking this sort of thing there is unhelpful. (@iarna)</li><li>ff87938 #11735 Running npm install --save-dev will now update shrinkwrap file, but only if there already are devDependencies in it. (@szimek)</li><li>c00ca3a #13394 Check installability of modules from shrinkwrap, since modules that came into the tree vie shrinkwrap won&#x27;t already have this information recorded in advance. (@iarna)</li></ul></li></ul></li><li>v3.10.9 (2016-10-06):<ul><li>LIFECYCLE FIXES<ul><li>d388f90 #13942 Fix current working directory while running shrinkwrap lifecycle scripts. Previously if you ran a shrinkwrap from another lifecycle script AND node_modules existed (and if you&#x27;re running npm shrinkwrap it probably should) then npm would run the shrinkwrap lifecycle from the node_modules folder instead of the package folder. (@evocateur) (@iarna)</li><li>c3b6cdf #13964 Fix bug where the uninstall lifecycles weren&#x27;t being run when you reinstalled/updated an existing module. (@iarna)</li><li>72bb89c #13344 When running lifecycles use TMPDIR if it&#x27;s writable and fall back to the current working directory if not. Previously we just assumed TMPDIR wouldn&#x27;t be writable (as we might have been running as nobody and nobody on some systems can&#x27;t write to TMPDIR). (@aaronjensen)</li></ul></li><li>SHRINKWRAP GIT &amp; TAGGED DEPENDENCY FIX<ul><li>3b5eee0 #13941 Fix git and tagged dependency matching with shrinkwraps. Previously git and tag (ie foo@latest) dependencies installed from a shrinkwrap would always be flagged as invalid. (@iarna)</li></ul></li></ul></li><li>v3.10.10 (2016-11-04):<ul><li>See the discussion on #14042 for more context on this release, which is intended to address a serious regression in shrinkwrap behavior in the version of the CLI currently bundled with Node.js 6 LTS &quot;Boron&quot;. You should never install this version directly; instead update to npm@4, which has everything in this release and more.</li><li>REGRESSION FIX<ul><li>9aebe98 #14117 Fixes a bug where installing a shrinkwrapped package would fail if the platform failed to install an optional dependency included in the shrinkwrap. (@watilde)</li></ul></li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="v400v461"></a><a href="https://github.com/npm/cli/blob/v4.6.1/CHANGELOG.md" target="_blank" rel="noopener noreferrer">v4.0.0~v4.6.1</a><a class="hash-link" href="#v400v461" title="Direct link to heading">#</a></h3><ul><li>v4.0.0 (2016-10-20):<ul><li>Partial shrinkwraps are no longer supported. npm-shrinkwrap.json is considered a complete installation manifest except for devDependencies.</li><li>BUGFIXES<ul><li>bc84012 #14117 Fixes a bug where installing a shrinkwrapped package would fail if the platform failed to install an optional dependency included in the shrinkwrap. (@watilde)</li></ul></li><li>NO MORE PARTIAL SHRINKWRAPS (BREAKING)<ul><li>That&#x27;s right. No more partial shrinkwraps. That means that if you have an npm-shrinkwrap.json in your project, npm will no longer install anything that isn&#x27;t explicitly listed there, unless it&#x27;s a devDependency. This will open doors to some nice optimizations and make use of npm shrinkwrap just generally smoother by removing some awful corner cases. We will also skip devDependency installation from package.json if you added devDependencies to your shrinkwrap by using npm shrinkwrap --dev.</li><li>b7dfae8 #14327 Use readShrinkwrap to read top level shrinkwrap. There&#x27;s no reason for npm to be doing its own bespoke heirloom-grade artisanal thing here. (@iarna)</li><li>0ae1f4b 4a54997 f22a1ae 3f61189 #14327 Treat shrinkwrap as canonical. That is, don&#x27;t try to fill in for partial shrinkwraps. Partial shrinkwraps should produce partial installs. If your shrinkwrap contains NO devDependencies then we&#x27;ll still try to install them from your package.json instead of assuming you NEVER want devDependencies. (@iarna)</li></ul></li></ul></li><li>v4.0.2 (2016-11-03):<ul><li>SMALLER CHANGES<ul><li>7f41295 #14519 Document that as of <a href="mailto:npm@4.0.1" target="_blank" rel="noopener noreferrer">npm@4.0.1</a>, npm shrinkwrap now includes devDependencies unless instructed otherwise. (@iarna)</li></ul></li></ul></li><li>v4.5.0 (2017-03-24):<ul><li>NO SHRINKWRAP, NO PROBLEM<ul><li>Previously we needed to extract every package&#x27;s tarball to look for an npm-shrinkwrap.json before we could begin working through what its dependencies were. This was one of the things stopping npm&#x27;s network accesses from happening more concurrently. The new filtered package metadata provides a new key, _hasShrinkwrap. When that&#x27;s set to false then we know we don&#x27;t have to look for one.</li></ul></li><li>4f5060eb3 #15969 Add support for skipping npm-shrinkwrap.json extraction when the registry can affirm that one doesn&#x27;t exist. (@iarna)</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="v500v5100-开始引入-package-lockjson"></a><a href="https://github.com/npm/cli/blob/v5.10.0/CHANGELOG.md" target="_blank" rel="noopener noreferrer">v5.0.0~v5.10.0</a> (开始引入 package-lock.json)<a class="hash-link" href="#v500v5100-开始引入-package-lockjson" title="Direct link to heading">#</a></h3><ul><li>v5.0.0 (2017-05-25):<ul><li>npm will --save by default now. Additionally, package-lock.json will be automatically created unless an npm-shrinkwrap.json exists. (#15666)</li><li>package locks no longer exclude optionalDependencies that failed to build. This means package-lock.json and npm-shrinkwrap.json should now be cross-platform. (#15900)</li><li>Shrinkwrap and package-lock no longer warn and exit without saving the lockfile.</li><li>A new, standardised lockfile feature meant for cross-package-manager compatibility (package-lock.json), and a new format and semantics for shrinkwrap. (#16441)</li><li>--save is no longer necessary. All installs will be saved by default. You can prevent saving with --no-save. Installing optional and dev deps is unchanged: use -D/--save-dev and -O/--save-optional if you want them saved into those fields instead. Note that since npm@3, npm will automatically update npm-shrinkwrap.json when you save: this will also be true for package-lock.json. (#15666)</li><li>Indentation is now detected and preserved for package.json, package-lock.json, and npm-shrinkwrap.json. If the package lock is missing, it will default to package.json&#x27;s current indentation.</li></ul></li><li>v5.0.4 (2017-06-13):<ul><li>800cb2b4e #17076 Use legacy from field to improve upgrade experience from legacy shrinkwraps and installs. (@zkat)</li></ul></li><li>v5.1.0 (2017-07-05):<ul><li>4f45ba222 a48958598 901bef0e1 #17508 Add a new requires field to package-lock.json with information about the logical dependency tree. This includes references to the specific version each package is intended to see, and can be used for many things, such as converting package-lock.json to other lockfile formats, various optimizations, and verifying correctness of a package tree. (@iarna)</li><li>3b4681b53 #17508 Stop calling addBundle on locked deps, speeding up the package-lock.json-based fast path. (@iarna)</li><li>It introduces a new package-lock.json field, called requires, which tracks which modules a given module requires.</li><li>It fixes #16866, allowing the package.json to trump the package-lock.json.</li><li>47e8fc8eb #17508 Make npm ls take package locks (and shrinkwraps) into account. This means npm ls can now be used to see which dependencies are missing, so long as a package lock has been previously generated with it in. (@iarna)</li><li>99ef3b52c #17505 Stop trying to commit updated npm-shrinkwrap.json and package-lock.json if they&#x27;re .gitignored. (@zkat)</li></ul></li><li>v5.2.0 (2017-07-05): （开始加入npx）<ul><li>c0a289b1b #17606 Make sure that when write package.json and package-lock.json we always use unix path separators. (@Standard8)</li></ul></li><li>v5.4.0 (2017-08-22):<ul><li>b6d5549d2 #17844 Make package-lock.json sorting locale-agnostic. Previously, sorting would vary by locale, due to using localeCompare for key sorting. This&#x27;ll give you a little package-lock.json churn as it reshuffles things, sorry! (@LotharSee)</li></ul></li><li>v5.6.0 (2017-11-27):<ul><li>bc263c3fd #19054 Fully cross-platform package-lock.json. Installing a failing optional dependency on one platform no longer removes it from the dependency tree, meaning that package-lock.json should now be generated consistently across platforms! 🎉 (@iarna)</li><li>f94fcbc50 #19160 Add --package-lock-only config option. This makes it so you can generate a target package-lock.json without performing a full install of node_modules. (@alopezsanchez)</li><li>a93e0a51d #18846 Correctly save transitive dependencies when using npm update in package-lock.json. (@iarna)</li></ul></li><li>v5.7.0 (2018-02-20):<ul><li>Allow npm install to fix package-lock.json and npm-shrinkwrap.json files that have merge conflicts in them without your having to edit them. It works in conjunction with npm-merge-driver to entirely eliminate package-lock merge conflicts.</li><li>e27674c22 Automatically resolve merge conflicts in lock-files. (@zkat)</li></ul></li><li>v5.8.0 (2018-03-08):<ul><li>2f513fe1c #19904 Make a best-attempt at preserving line ending style when saving package.json/package-lock.json/npm-shrinkwrap.json. This goes hand-in-hand with a previous patch to preserve detected indentation style. (@tuananh)</li><li>d3cfd41a2 <a href="mailto:pacote@7.6.1" target="_blank" rel="noopener noreferrer">pacote@7.6.1</a> (@zkat)<ul><li>Enable file:-based resolved URIs in package-lock.json.</li><li>Retry git-based operations on certain types of failure.</li></ul></li><li>fc8761daf #19629 Give more detailed, contextual information when npm fails to parse package-lock.json and npm-shrinkwrap.json, instead of saying JSON parse error and leaving you out in the cold. (@JoshuaKGoldberg)</li></ul></li><li>v5.9.0 (2018-03-23):<ul><li>If you resolve a package-lock.json merge conflict with npm install we now suggest you setup a merge driver to handle these automatically for you. If you&#x27;re reading this and you&#x27;d like to set it up now, run:</li><li>npx npm-merge-driver install -g</li><li>5ebe99719 #20071 suggest installing the merge driver (@zkat)</li></ul></li><li>v5.10.0-next.0 (2018-04-12):<ul><li>f18be9b39 #20154 Let version succeed when package-lock.json is gitignored. (@nwoltman)</li><li>8e21b19a8 #20140 Note in documentation that package-lock.json version gets touched by npm version. (@srl295)</li></ul></li><li>v5.10.0-next.1 (2018-05-07):<ul><li>SHRONKWRAPS AND LACKFILES</li><li>If a published modules had legacy npm-shrinkwrap.json we were saving ordinary registry dependencies (name@version) to your package-lock.json as https:// URLs instead of versions.<ul><li>36f998411 When saving the lock-file compute how the dependency is being required instead of using _resolved in the package.json. This fixes the bug that was converting registry dependencies into https:// dependencies. (@iarna)</li><li>113e1a3af When encountering a https:// URL in our lockfiles that point at our default registry, extract the version and use them as registry dependencies. This lets us heal package-lock.json files produced by 6.0.0 (@iarna)</li></ul></li><li>MORE package-lock.json FORMAT CHANGES?!<ul><li>074502916 #20384 Add from field back into package-lock for git dependencies. This will give npm the information it needs to figure out whether git deps are valid, specially when running with legacy install metadata or in --package-lock-only mode when there&#x27;s no node_modules. This should help remove a significant amount of git-related churn on the lock-file. (@zkat)</li></ul></li><li>1b535cb9d #20358 npm install-test (aka npm it) will no longer generate package-lock.json when running with --no-package-lock or package-lock=false. (@raymondfeng)</li><li>268f7ac50 5f84ebdb6 c12e61431 #20390 Fix a scenario where a git dependency had a comittish associated with it that was not a complete commitid. npm would never consider that entry in the package.json as matching the entry in the package-lock.json and this resulted in inappropriate pruning or reinstallation of git dependencies. This has been addressed in two ways, first, the addition of the from field as described in #20384 means we can exactly match the package.json. Second, when that&#x27;s missing (when working with older package-lock.json files), we assume that the match is ok. (If it&#x27;s not, we&#x27;ll fix it up when a real installation is done.) (@iarna)</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="v600-0v61415"></a><a href="https://github.com/npm/cli/blob/v5.10.0/CHANGELOG.md" target="_blank" rel="noopener noreferrer">v6.0.0-0~v6.14.15</a><a class="hash-link" href="#v600-0v61415" title="Direct link to heading">#</a></h3></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Blog/blog/tags/npm">npm</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/Blog/blog/Nodejs/npm包锁版本">npm-shrinkwrap.json、package-lock.json和yarn.loc</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-09-18T10:28:25.189Z" itemprop="datePublished">September 18, 2021</time> · One min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mengfei0053" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">MengFei</span></a></div><small class="avatar__subtitle" itemprop="description">Front-End Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="初始"></a>初始<a class="hash-link" href="#初始" title="Direct link to heading">#</a></h2><p>锁版本的起始
npm v1.1.2 版本， 2012年2月25号 <a href="https://github.com/npm/cli/commit/d54ce3154dfe5283fcfeffc13d4e003bbade6370#diff-160056e00187b4f9fa30cb1ccf52d15febbae3f425abb1cf72a5e56b388d2a67" target="_blank" rel="noopener noreferrer">https://github.com/npm/cli/commit/d54ce3154dfe5283fcfeffc13d4e003bbade6370#diff-160056e00187b4f9fa30cb1ccf52d15febbae3f425abb1cf72a5e56b388d2a67</a>
这个commit 开始 添加了 npm shrinkwrap
<a href="https://github.com/npm/cli/blob/v1.1.2/doc/cli/shrinkwrap.md" target="_blank" rel="noopener noreferrer">v1.1.2 npm-shrinkwrap 解释文档</a>；</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">By default, &quot;npm install&quot; recursively installs the target&#x27;s dependencies (as specified in package.json), choosing the latest available version that satisfies the dependency&#x27;s semver pattern.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">When &quot;npm install&quot; installs a package with a npm-shrinkwrap.json file in the package root, the shrinkwrap file (rather than package.json files) completely drives the installation of that package and all of its dependencies (recursively). </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>使用方法</p><ol><li>npm i 递归安装package.json 中记载的依赖，依赖版本选择符合 semver 版本的最新版。</li><li>通过 npm shrinkwrap 生成 npm-shrinkwrap.json 文件来保存当前依赖的版本信息</li><li>当 npm-shrinkwrap.json 文件存在时,按照此文件中记载的依赖版本，进行安装</li></ol></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Blog/blog/tags/npm">npm</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/Blog/blog/Nodejs/process信号事件">Nodejs Process 信号事件</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-09-18T10:28:25.189Z" itemprop="datePublished">September 18, 2021</time> · 4 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mengfei0053" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">MengFei</span></a></div><small class="avatar__subtitle" itemprop="description">Front-End Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>当 Node.js 进程收到信号时，则将触发信号事件。 有关标准 POSIX 信号名称（例如 &#x27;SIGINT&#x27;、&#x27;SIGHUP&#x27; 等）的列表，请参阅 <a href="https://man7.org/linux/man-pages/man7/signal.7.html" target="_blank" rel="noopener noreferrer">signal(7)</a>。</p><p><strong>信号在 Worker 线程上不可用。</strong></p><ul><li><p><strong>&#x27;SIGINT&#x27; 所有平台都支持来自终端的 &#x27;SIGINT&#x27;，通常可以使用 Ctrl+C 生成（但是这是可配置的）。 当启用终端原始模式并使用 Ctrl+C 时不会生成它。</strong></p></li><li><p><strong>&#x27;SIGKILL&#x27; 不能安装监听器，它会无条件地终止所有平台上的 Node.js。</strong></p></li><li><p><strong>发送 SIGINT、SIGTERM、和 SIGKILL 会导致目标进程无条件的终止，之后子进程会报告进程被信号终止。</strong></p></li><li><p>&#x27;SIGUSR1&#x27; 由 Node.js 预留以启动调试器。 可以安装监听器，但这样做可能会干扰调试器。</p></li><li><p>&#x27;SIGTERM&#x27; 和 &#x27;SIGINT&#x27; 在非 Windows 平台上具有默认的句柄，其在使用代码 128 + signal number 退出之前重置终端模式。 如果这些信号之一安装了监听器，则其默认行为将被删除（Node.js 将不再退出）。</p></li><li><p>&#x27;SIGPIPE&#x27; 默认情况下忽略。 它可以安装监听器。</p></li><li><p>&#x27;SIGHUP&#x27; 在 Windows 上是在关闭控制台窗口时生成，在其他平台上是在各种类似条件下生成。 参见 signal(7)。 它可以安装监听器，但是 Node.js 将在大约 10 秒后被 Windows 无条件地终止。 在非 Windows 平台上，SIGHUP 的默认行为是终止 Node.js，但一旦安装了监听器，则其默认行为将被删除。</p></li><li><p>&#x27;SIGTERM&#x27; Windows 上不支持，可以监听。</p></li><li><p>&#x27;SIGBREAK&#x27; 在 Windows 上，当按下 Ctrl+Break 时会发送。 在非 Windows 平台上，它可以被监听，但无法发送或生成它。</p></li><li><p>&#x27;SIGWINCH&#x27; 当调整控制台大小时会发送。 在 Windows 上，这只会发生在当光标移动时写入控制台，或者当在原始模式下使用可读的终端时。</p></li><li><p>&#x27;SIGSTOP&#x27; 不能安装监听器。</p></li><li><p>&#x27;SIGBUS&#x27;、&#x27;SIGFPE&#x27;、&#x27;SIGSEGV&#x27; 和 &#x27;SIGILL&#x27;，当没有使用 kill(2) 人为引发时，本质上会使进程处于调用 JS 监听器不安全的状态。 这样做可能会导致进程停止响应。</p></li><li><p>0 可以发送来测试进程是否存在，如果进程存在则没影响，如果进程不存在则抛出错误。
Windows 不支持信号，因此没有等价的使用信号来终止，但 Node.js 提供了一些对 process.kill() 和 subprocess.kill() 的模拟：</p></li><li><p>发送信号 0 可以作为独立于平台的方式来测试进程是否存在。</p></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Blog/blog/tags/nodejs">nodejs</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/Blog/blog/Others/Front-End-Test">前端自动化测试</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-09-18T10:28:25.189Z" itemprop="datePublished">September 18, 2021</time> · 2 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mengfei0053" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">MengFei</span></a></div><small class="avatar__subtitle" itemprop="description">Front-End Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><ul><li><a href="#%E5%89%8D%E7%AB%AF%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95">前端自动化测试</a><ul><li><a href="#%E5%89%8D%E8%A8%80">前言</a></li><li><a href="#%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6">测试框架</a></li></ul></li></ul><header><h1>前端自动化测试</h1></header><p>在公司开始尝试推行编写前端测试用例</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="前言"></a>前言<a class="hash-link" href="#前言" title="Direct link to heading">#</a></h2><p>测试种类繁多，但测试的最终目的，无外乎保从各个环节障程序的健壮，稳定。</p><p>// 目录:/assets/share03/软件测试.xmind</p><ul><li><p>单元测试</p><ul><li>前端测试粒度常见以函数，类，组件，模块等为单位，编写测试代码。(当前项目环境中欠缺)</li></ul></li><li><p>集成测试</p><ul><li>多模块联合起来是否符合功能预期的测试。(目前主要依赖测试人员的手工测试,脚本测试)</li></ul></li><li><p>系统测试</p><ul><li>通常用黑盒的方式进行，包括健壮性测试，性能测试，功能测试，用户界面测试，压力测试等。在不断的需求变更后，进行回归测试，保证程序的可用性。（类比我们 stage 上的回归测试）</li></ul></li><li><p>验收测试</p><ul><li>内测(alpha， 可以类比我们的 A 环境测试)，公测(beta，可以类比我们的 B 环境测试)。</li></ul><p>// 目录: /assets/share01/React 前端测试.xmind</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="测试框架"></a>测试框架<a class="hash-link" href="#测试框架" title="Direct link to heading">#</a></h2><ul><li>jest<ul><li>github <a href="https://github.com/facebook/jest" target="_blank" rel="noopener noreferrer">https://github.com/facebook/jest</a></li><li>英文 <a href="https://jestjs.io/" target="_blank" rel="noopener noreferrer">https://jestjs.io/</a></li><li>中文 <a href="https://www.jestjs.cn/" target="_blank" rel="noopener noreferrer">https://www.jestjs.cn/</a></li></ul></li><li>cypress<ul><li>github <a href="https://github.com/cypress-io/cypress" target="_blank" rel="noopener noreferrer">https://github.com/cypress-io/cypress</a></li><li>英文 <a href="https://www.cypress.io/" target="_blank" rel="noopener noreferrer">https://www.cypress.io/</a></li></ul></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Blog/blog/tags/test">Test</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Blog/blog/tags/jest">Jest</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/Blog/blog/React/ReactHooks">ReactHooks</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-09-18T10:28:25.189Z" itemprop="datePublished">September 18, 2021</time> · 5 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mengfei0053" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">MengFei</span></a></div><small class="avatar__subtitle" itemprop="description">Front-End Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><ul><li><a href="#%E5%9F%BA%E7%A1%80-hooks">基础 hooks</a><ul><li><a href="#usestate">useState</a></li><li><a href="#useeffect">useEffect</a></li><li><a href="#usecontext">useContext</a></li></ul></li><li><a href="#%E5%85%B6%E4%BB%96-hooks">其他 hooks</a><ul><li><a href="#usereducer">useReducer</a></li><li><a href="#usecallback">useCallback</a></li><li><a href="#usememo">useMemo</a></li><li><a href="#useref">useRef</a></li><li><a href="#useimperativehandle">useImperativeHandle</a></li><li><a href="#uselayouteffect">useLayoutEffect</a></li><li><a href="#usedebugvalue">useDebugValue</a></li></ul></li></ul><blockquote><p>React 16.8 加入的特性。 React hooks 允许开发者，在函数组件中，使用 state,和类似生命周期的功能。</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="基础-hooks"></a>基础 hooks<a class="hash-link" href="#基础-hooks" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="usestate"></a>useState<a class="hash-link" href="#usestate" title="Direct link to heading">#</a></h3><p>概述：用来声明状态，和改变该状态的函数。</p><p>参数：状态初始值，或者一个返回初始值的函数。只会在组件出初次渲染时执行。</p><p>用法：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly react"><pre tabindex="0" class="prism-code language-react codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const [state, setState] = useState(initialState); // 参考Es6 数组的结构赋值</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const [state, setState] = useState(() =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   const initialState = someExpensiveComputation(props);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   return initialState;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>eg：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly react"><pre tabindex="0" class="prism-code language-react codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">function Counter({initialCount}) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  const [count, setCount] = useState(initialCount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return (</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      Count: {count}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;button onClick={() =&gt; setCount(0)}&gt;Reset&lt;/button&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;button onClick={() =&gt; setCount(prevCount =&gt; prevCount + 1)}&gt;+&lt;/button&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;button onClick={() =&gt; setCount(prevCount =&gt; prevCount - 1)}&gt;-&lt;/button&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="useeffect"></a>useEffect<a class="hash-link" href="#useeffect" title="Direct link to heading">#</a></h3><p>概述：处理具有副作用的行为，例如（订阅，计时器，日志记录等。），并在函数组件渲染结束后运行。</p><p>参数：</p><ol><li>第一个参数，接收一个可能具有副作用（订阅，计时器，日志记录等。）的函数。该函数的返回值，可能是一个清理函数。</li><li>第二个参数（可选），含有执行依赖的数组。当该参数为空数组时，该 effects 只在初次渲染后执行。</li></ol><p>用法：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly react"><pre tabindex="0" class="prism-code language-react codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">useEffect(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const subscription = props.source.subscribe();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return () =&gt; { // 组件被移除前执行清理函数</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      subscription.unsubscribe();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  [props.source], // 依赖改变，订阅函数才会执行</span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">useEffect(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const subscription = props.source.subscribe();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return () =&gt; { // 组件被移除前执行清理函数</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      subscription.unsubscribe();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  [], // 初次渲染 执行</span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="usecontext"></a>useContext<a class="hash-link" href="#usecontext" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly react"><pre tabindex="0" class="prism-code language-react codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const MyContext = React.createContext(defaultValue);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">const value = useContext(MyContext);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="其他-hooks"></a>其他 hooks<a class="hash-link" href="#其他-hooks" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="usereducer"></a>useReducer<a class="hash-link" href="#usereducer" title="Direct link to heading">#</a></h3><p>概述：在状态较复杂时使用.我的理解是，和 redux 类似的概念。因为工作一直在 使用 redux。所以这个概念，暂时不做深入了解。以后有机会用到的话，再深入学习。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="usecallback"></a>useCallback<a class="hash-link" href="#usecallback" title="Direct link to heading">#</a></h3><p>概述：类似 useMemo，返回一个 callback 函数，</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly react"><pre tabindex="0" class="prism-code language-react codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const memoizedCallback = useCallback(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    doSomething(a, b);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  [a, b],</span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>测试中，遇到问题：依赖值没变，但会重新进行计算。</li><li>有点没搞懂，这个 hook 的使用场景</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="usememo"></a>useMemo<a class="hash-link" href="#usememo" title="Direct link to heading">#</a></h3><p>概述：返回一个计算值，只在依赖发生变化时计算。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly react"><pre tabindex="0" class="prism-code language-react codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">const memoizedValue = useMemo(() =&gt; computeExpensiveValue(a, b), [a, b]);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="useref"></a>useRef<a class="hash-link" href="#useref" title="Direct link to heading">#</a></h3><p>概述：useRef 返回一个可变的 ref 对象。初始化时，初始化参数将被赋值给该对象的 current 属性。这个 ref 对象，存在在整个组件的生命周期内</p><p>最常用的用法，是用 ref 对象存储一个 dom 对象。eg:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly react"><pre tabindex="0" class="prism-code language-react codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">function TextInputWithFocusButton() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  const inputEl = useRef(null);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  const onButtonClick = () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // `current` points to the mounted text input element</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    inputEl.current.focus();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return (</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;input ref={inputEl} type=&quot;text&quot; /&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;button onClick={onButtonClick}&gt;Focus the input&lt;/button&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>但是，ref 对象并不是只能存储 dom 对象。它是一个通用容器。有些类似 类的实例属性。可以存储任意类型的值。eg:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly react"><pre tabindex="0" class="prism-code language-react codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">function Timer() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  const intervalRef = useRef();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  useEffect(() =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const id = setInterval(() =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      // ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    intervalRef.current = id;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      clearInterval(intervalRef.current);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  });</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="useimperativehandle"></a>useImperativeHandle<a class="hash-link" href="#useimperativehandle" title="Direct link to heading">#</a></h3><p>概述：在使用 ref 时，可以使用 useImperativeHandle，选择特定的实例属性暴漏给父组件。</p><p>必须结合 forwardRef 使用</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly react"><pre tabindex="0" class="prism-code language-react codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">function FancyInput(props, ref) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  const inputRef = useRef();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  useImperativeHandle(ref, () =&gt; ({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    focus: () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      inputRef.current.focus();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return &lt;input ref={inputRef} ... /&gt;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">FancyInput = forwardRef(FancyInput);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// 在父组件中拿到的ref引用，是一个 { focus:Function } 的对象。</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="uselayouteffect"></a>useLayoutEffect<a class="hash-link" href="#uselayouteffect" title="Direct link to heading">#</a></h3><p>与 useEffect 类似，</p><p>useLayoutEffect 在 componentDidMount 和 componentDidUpdate 相同的阶段触发。</p><p>React 官方建议，优先使用 useEffect，只在使用 useEffect 遇到问题时，尝试使用 useLayoutEffect</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="usedebugvalue"></a>useDebugValue<a class="hash-link" href="#usedebugvalue" title="Direct link to heading">#</a></h3></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Blog/blog/tags/react">react</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Blog/blog/tags/hooks">hooks</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/Blog/blog/Ts/Typescript使用总结及部分小技巧">Typescript使用总结及部分小技巧</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-09-18T10:28:25.189Z" itemprop="datePublished">September 18, 2021</time> · 10 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mengfei0053" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">MengFei</span></a></div><small class="avatar__subtitle" itemprop="description">Front-End Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><ul><li><a href="#typescript-%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93%E5%8F%8A%E9%83%A8%E5%88%86%E5%B0%8F%E6%8A%80%E5%B7%A7">Typescript 使用总结及部分小技巧</a><ul><li><a href="#1-typescript-%E9%83%A8%E5%88%86%E5%B8%B8%E7%94%A8%E5%8F%AF%E8%83%BD%E4%BC%9A%E8%A2%AB%E5%BF%BD%E7%95%A5%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9">1. Typescript 部分常用可能会被忽略的知识点</a><ul><li><a href="#11-%E7%B1%BB%E5%9E%8B%E8%8E%B7%E5%8F%96">1.1 类型获取</a><ul><li><a href="#111-typeof">1.1.1 typeof</a></li><li><a href="#112-%E7%B4%A2%E5%BC%95%E7%B1%BB%E5%9E%8B%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C%E7%AC%A6-keyof">1.1.2 索引类型查询操作符 keyof</a></li><li><a href="#113-%E7%B4%A2%E5%BC%95%E8%AE%BF%E9%97%AE">1.1.3 索引访问</a></li></ul></li><li><a href="#12-%E6%B3%9B%E5%9E%8B%E7%9A%84%E4%BD%BF%E7%94%A8%E5%92%8C%E5%AE%9A%E4%B9%89">1.2 泛型的使用和定义</a></li><li><a href="#13-%E6%9D%A1%E4%BB%B6%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BD%BF%E7%94%A8%E5%92%8C%E5%AE%9A%E4%B9%89">1.3 条件类型的使用和定义</a></li></ul></li><li><a href="#2-react-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84-typescript">2. React 项目中的 Typescript</a><ul><li><a href="#21-%E8%87%AA%E5%AE%9A%E4%BF%AE%E5%A4%8D%E5%92%8C%E8%87%AA%E5%8A%A8%E5%AF%BC%E5%85%A5">2.1 自定修复和自动导入</a><ul><li><a href="#211-%E4%B9%A6%E5%86%99%E6%97%B6%E7%9A%84%E6%99%BA%E8%83%BD%E6%8F%90%E7%A4%BA%E5%92%8C%E5%AF%BC%E5%85%A5">2.1.1 书写时的智能提示和导入</a></li><li><a href="#212-%E8%87%AA%E5%8A%A8-fix-%E7%9A%84%E8%87%AA%E5%8A%A8%E5%AF%BC%E5%85%A5">2.1.2 自动 fix 的自动导入</a></li></ul></li><li><a href="#22-%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84-props-%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B">2.2 定义组件的 props 中的类型</a><ul><li><a href="#221-props-%E7%9A%84-interface-%E5%AE%9A%E4%B9%89%E4%BD%8D%E7%BD%AE">2.2.1 props 的 interface 定义位置</a></li><li><a href="#222-%E5%AF%BC%E5%87%BA%E5%8F%AF%E8%83%BD%E4%BC%9A%E7%94%A8%E5%88%B0%E7%9A%84%E7%B1%BB%E5%9E%8Binterfacetypeenum">2.2.2 导出可能会用到的类型（interface/type/enum）</a></li><li><a href="#223-%E4%BD%BF%E7%94%A8%E5%92%8C%E6%9F%A5%E6%89%BE%E5%B7%B2%E5%AE%9A%E4%B9%89%E7%9A%84%E7%B1%BB%E5%9E%8B">2.2.3 使用和查找已定义的类型</a></li></ul></li><li><a href="#23-%E4%BC%A0%E9%80%92%E7%BB%84%E4%BB%B6-props-%E6%97%B6%E4%BD%BF%E7%94%A8%E5%88%B0%E7%9A%84%E7%B1%BB%E5%9E%8B">2.3 传递组件 props 时，使用到的类型</a></li><li><a href="#24-vsocde-%E4%B8%AD%E7%9A%84%E9%87%8D%E6%9E%84">2.4 Vsocde 中的重构</a><ul><li><a href="#241-%E5%BC%95%E7%94%A8%E6%9F%A5%E6%89%BE">2.4.1 引用查找</a></li><li><a href="#242-%E5%BC%95%E7%94%A8%E9%87%8D%E5%91%BD%E5%90%8D">2.4.2 引用重命名</a></li></ul></li><li><a href="#25-%E4%BD%BF%E7%94%A8-code-snippets">2.5 使用 code snippets</a><ul><li><a href="#241-es7-reactreduxreact-nativejs-snippets">2.4.1 ES7 React/Redux/React-Native/JS snippets</a></li><li><a href="#242-typescript-react-code-snippets">2.4.2 Typescript React Code snippets</a></li></ul></li></ul></li><li><a href="#3-react-redux-%E7%BB%93%E5%90%88-typescript">3 React Redux 结合 Typescript</a></li></ul></li></ul><header><h1>Typescript 使用总结及部分小技巧</h1></header><p>备份一篇去年写的关于ts 使用的小文章。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="1-typescript-部分常用可能会被忽略的知识点"></a>1. Typescript 部分常用可能会被忽略的知识点<a class="hash-link" href="#1-typescript-部分常用可能会被忽略的知识点" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="11-类型获取"></a>1.1 类型获取<a class="hash-link" href="#11-类型获取" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="111-typeof"></a>1.1.1 typeof<a class="hash-link" href="#111-typeof" title="Direct link to heading">#</a></h4><p>使用 typeof 获取变量类型</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">Setting</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  color</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;red&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  font</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xxx&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  width</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  height</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xxxx&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">SettingType</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> </span><span class="token maybe-class-name">Setting</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getPropX</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xxx&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">GetPropXType</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> getPropX</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">type </span><span class="token maybe-class-name">GetPropXReturnType</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReturnType</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> getPropX</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="112-索引类型查询操作符-keyof"></a>1.1.2 索引类型查询操作符 keyof<a class="hash-link" href="#112-索引类型查询操作符-keyof" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">Setting</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  color</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;red&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  font</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xxx&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  width</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  height</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;xxxx&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// type SettingKey = &#x27;color&#x27; | &#x27;font&#x27; | &#x27;width&#x27; | &#x27;height&#x27; | &#x27;title&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name maybe-class-name">SettingKey</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">keyof</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> </span><span class="token maybe-class-name">Setting</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="113-索引访问"></a>1.1.3 索引访问<a class="hash-link" href="#113-索引访问" title="Direct link to heading">#</a></h4><p>使用 <code>typeName[&#x27;propName&#x27;]</code> 格式读取属性类型</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Person</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  sex</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;man&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;woman&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  job</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">eat</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">food</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">eat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Person</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;eat&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="12-泛型的使用和定义"></a>1.2 泛型的使用和定义<a class="hash-link" href="#12-泛型的使用和定义" title="Direct link to heading">#</a></h3><blockquote><p>泛型其实就是类型变量，根据传入的类型，获取到需要的类型</p></blockquote><p>添加泛型的位置:</p><ul><li>函数泛型 -- 在函数上添加泛型</li></ul><p><img alt="auto import" src="/Blog/assets/images/3-2672314d63e71850a8ca080dab061316.png"></p><ul><li>类泛型 -- 在类上添加泛型</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">GenericNumber</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name constant" style="color:#36acaa">T</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  zeroValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">add</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>类型泛型 -- 在接口或类型别名(使用 type 或 interface 定义的类型)上添加泛型</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// antd rowSelection 的类型</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">TableRowSelection</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name constant" style="color:#36acaa">T</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">type</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">RowSelectionType</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  selectedRowKeys</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Key</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  onChange</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selectedRowKeys</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Key</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> selectedRows</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  getCheckboxProps</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">record</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">Partial</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Omit</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">CheckboxProps</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;checked&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;defaultChecked&quot;</span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  onSelect</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">SelectionSelectFn</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  onSelectMultiple</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selected</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> selectedRows</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> changeRows</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/** @deprecated This function is meaningless and should use `onChange` instead */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  onSelectAll</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selected</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> selectedRows</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> changeRows</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/** @deprecated This function is meaningless and should use `onChange` instead */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  onSelectInvert</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selectedRowKeys</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Key</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  selections</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">INTERNAL_SELECTION_ITEM</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  hideDefaultSelections</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  fixed</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  columnWidth</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  columnTitle</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">ReactNode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  renderCell</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    record</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    index</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    originNode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">ReactNode</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">ReactNode</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token maybe-class-name">RcRenderedCell</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// antd table columns 的类型</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">declare</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name maybe-class-name">ColumnsType</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name maybe-class-name">RecordType</span><span class="token class-name"> </span><span class="token class-name operator" style="color:#393A34">=</span><span class="token class-name"> </span><span class="token class-name builtin">unknown</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token maybe-class-name">ColumnGroupType</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">RecordType</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token maybe-class-name">ColumnType</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">RecordType</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="13-条件类型的使用和定义"></a>1.3 条件类型的使用和定义<a class="hash-link" href="#13-条件类型的使用和定义" title="Direct link to heading">#</a></h3><p>常用的条件类型</p><blockquote><p>更过预定义的条件类型 typescript/lib/lib.d.ts</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">- Partial&lt;T&gt; -- 使 T 中的所有属性变成可选属性</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- Pick&lt;T,K extends keyof T&gt; -- 从 T 中挑选属性 K，组成新的类型</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- Omit&lt;T, K extends keyof any&gt; -- 从 T 中删除属性 K，组成新的类型</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- ReturnType&lt;T extends (...args: any) =&gt; any&gt; -- 获取函数的返回值类型</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- Required&lt;T&gt; -- 使 T 中的所有属性变成必选属性</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- Readonly&lt;T&gt; -- 使 T 中的所有属性变成只读属性</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- Exclude&lt;T, U&gt; -- 从 T 中剔除可以赋值给 U 的类型。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- Extract&lt;T, U&gt; -- 提取 T 中可以赋值给 U 的类型。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- NonNullable&lt;T&gt; -- 从 T 中剔除 null 和 undefined。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- ReturnType&lt;T&gt; -- 获取函数返回值类型。</span></span><span class="token-line" style="color:#393A34"><span class="token plain">- InstanceType&lt;T&gt; -- 获取构造函数类型的实例类型。</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="2-react-项目中的-typescript"></a>2. React 项目中的 Typescript<a class="hash-link" href="#2-react-项目中的-typescript" title="Direct link to heading">#</a></h2><p>此章节重点,类型定义和类型使用经验和小技巧</p><blockquote><ol><li>使用 vscode 开发 typescript 时，强大的智能提示和自动导入以及自动修复功能的使用。</li></ol></blockquote><blockquote><ol start="2"><li>类型的复用</li></ol></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="21-自定修复和自动导入"></a>2.1 自定修复和自动导入<a class="hash-link" href="#21-自定修复和自动导入" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="211-书写时的智能提示和导入"></a>2.1.1 书写时的智能提示和导入<a class="hash-link" href="#211-书写时的智能提示和导入" title="Direct link to heading">#</a></h4><p>跨文件，可导入的 类型 / 方法 / 变量 ...的智能提示，以及自动导入</p><p><img alt="auto import" src="/Blog/assets/images/1-6219a770f848a2930a598ce3afc03830.gif"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="212-自动-fix-的自动导入"></a>2.1.2 自动 fix 的自动导入<a class="hash-link" href="#212-自动-fix-的自动导入" title="Direct link to heading">#</a></h4><p>单个修复导入 <img alt="fix import" src="/Blog/assets/images/2-791a492f78e5c8e685359eec597afad1.gif"></p><p>所有修复导入 <img alt="fix import all" src="/Blog/assets/images/3-cd7969c057c3718ccb887b3f37f4f8d0.gif"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="22-定义组件的-props-中的类型"></a>2.2 定义组件的 props 中的类型<a class="hash-link" href="#22-定义组件的-props-中的类型" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="221-props-的-interface-定义位置"></a>2.2.1 props 的 interface 定义位置<a class="hash-link" href="#221-props-的-interface-定义位置" title="Direct link to heading">#</a></h4><blockquote><p>props 的 interface 定义位置: 组件文件中</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">IComNameProps</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">ComName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token maybe-class-name">FunctionComponent</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">IComNameProps</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token maybe-class-name">ComName</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">ComName</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="222-导出可能会用到的类型interfacetypeenum"></a>2.2.2 导出可能会用到的类型（interface/type/enum）<a class="hash-link" href="#222-导出可能会用到的类型interfacetypeenum" title="Direct link to heading">#</a></h4><blockquote><p>大部分组件的 props 的 interface, 可以使用 export 导出,方便在使用组件时，部分类型的使用(可以参考下一章节:<a href="#%E4%BC%A0%E9%80%92%E7%BB%84%E4%BB%B6-props-%E6%97%B6%E4%BD%BF%E7%94%A8%E5%88%B0%E7%9A%84%E7%B1%BB%E5%9E%8B">传递组件 props 时，使用到的类型</a>)。</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">IComNameProps</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="223-使用和查找已定义的类型"></a>2.2.3 使用和查找已定义的类型<a class="hash-link" href="#223-使用和查找已定义的类型" title="Direct link to heading">#</a></h4><blockquote><p>定义组件 props 属性时，引用类属性，优先考虑使用已定义的类型（善用 vsocde 强大的引用提示，以及自动引入功能）</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">Store</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;antd/lib/form/interface&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">ResourceSaveDto</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@/client/services/umgt/resource&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">PopupStore</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Store</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">ResourceSaveDto</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="23-传递组件-props-时使用到的类型"></a>2.3 传递组件 props 时，使用到的类型<a class="hash-link" href="#23-传递组件-props-时使用到的类型" title="Direct link to heading">#</a></h3><blockquote><p>上面定义并导出好组件和组件的类型后，在使用此组件时，可同时引入可能用到的类型</p></blockquote><p>大部分组件的 props 传递时，需要的数据类型，都可以通过鼠标放上去的提示来找到。</p><blockquote><ol><li>直接使用和引入单个 props 属性类型</li><li>引入整个组件 props 类型，使用 interfaceName[&#x27;propsName]</li></ol></blockquote><p><img alt="类型查找" src="/Blog/assets/images/6-83fdd965fb07dce17877a530a3aa40a9.gif"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="24-vsocde-中的重构"></a>2.4 Vsocde 中的重构<a class="hash-link" href="#24-vsocde-中的重构" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="241-引用查找"></a>2.4.1 引用查找<a class="hash-link" href="#241-引用查找" title="Direct link to heading">#</a></h4><p><img alt="引用查找" src="/Blog/assets/images/7-e18e63efec7e3ef75b62a90362c58f61.gif"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="242-引用重命名"></a>2.4.2 引用重命名<a class="hash-link" href="#242-引用重命名" title="Direct link to heading">#</a></h4><p>邮件重命名或者 F2 重命名</p><p><img alt="引用查找" src="/Blog/assets/images/8-a9f25b0750ba62f4dff63f261f6c33b8.gif"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="25-使用-code-snippets"></a>2.5 使用 code snippets<a class="hash-link" href="#25-使用-code-snippets" title="Direct link to heading">#</a></h3><p>给大家推荐的 React Ts Extension Pack 包里，包含了两个下载量比较大的 react 语法段的包</p><p><img alt="语法片段包" src="/Blog/assets/images/2-42426328eafb13574e46b7c64621c098.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="241-es7-reactreduxreact-nativejs-snippets"></a>2.4.1 ES7 React/Redux/React-Native/JS snippets<a class="hash-link" href="#241-es7-reactreduxreact-nativejs-snippets" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">imp→    </span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">moduleName</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;module&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">imd→    </span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> destructuredModule </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;module&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">imr→    </span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">edf→    </span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">params</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">cp→ </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">props</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">cs→ </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">state</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">rcc→</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Component</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">FileName</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">$</span><span class="token number" style="color:#36acaa">2</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">rcep→</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Component</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">PropTypes</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;prop-types&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">FileName</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> propTypes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">$</span><span class="token number" style="color:#36acaa">2</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">rafcp→</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">PropTypes</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;prop-types&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">$1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">$</span><span class="token number" style="color:#36acaa">0</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token number" style="color:#36acaa">1.</span><span class="token plain">propTypes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> $</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> $</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">rcredux→</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Component</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> connect </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react-redux&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">FileName</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">$</span><span class="token number" style="color:#36acaa">4</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">mapStateToProps</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mapDispatchToProps </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mapStateToProps</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mapDispatchToProps</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">FileName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="242-typescript-react-code-snippets"></a>2.4.2 Typescript React Code snippets<a class="hash-link" href="#242-typescript-react-code-snippets" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// tsrsfc   stateless functional component</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">IAppProps</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token maybe-class-name">FunctionComponent</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">IAppProps</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// tsrcc→   class component skeleton</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">IAppProps</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">App</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token maybe-class-name">Component</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">IAppProps</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// tscntr→  react redux container skeleton</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> connect </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react-redux&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">IAppProps</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">App</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token maybe-class-name">Component</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">IAppProps</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">mapState2Props</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mapState2Props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="3-react-redux-结合-typescript"></a>3 React Redux 结合 Typescript<a class="hash-link" href="#3-react-redux-结合-typescript" title="Direct link to heading">#</a></h2><p><a href="https://redux.js.org/recipes/usage-with-typescript#type-checking-state" target="_blank" rel="noopener noreferrer">Redux Typescript 基础写法</a></p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Blog/blog/tags/ts">ts</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Blog/blog/tags/react">react</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/Blog/blog/Powershell-windows">Powershell 下无法使用 npm 全局包</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-09-18T10:28:25.189Z" itemprop="datePublished">September 18, 2021</time> · One min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mengfei0053" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">MengFei</span></a></div><small class="avatar__subtitle" itemprop="description">Front-End Developer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img alt="类似yarn 报错" src="/Blog/assets/images/2020041517270719-aea1a1e808d3eab52852e9443dbe4439.png"></p><p>管理员启动 powershell</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">set-ExecutionPolicy RemoteSigned</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>关闭 powershell， 重新启动</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Blog/blog/tags/powershell">Powershell</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Blog/blog/tags/windows">windows</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/Blog/blog/tags/npm">npm</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Blog/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Blog/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/Blog/assets/js/runtime~main.1e96c18e.js"></script>
<script src="/Blog/assets/js/main.03c5c8ee.js"></script>
</body>
</html>